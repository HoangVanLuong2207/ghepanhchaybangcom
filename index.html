<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>C·∫Øt & Gh√©p ·∫¢nh N√¢ng Cao (Mobile-Friendly & T√πy ch·ªçn gh√©p)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
</head>
<body>
    <div class="container">
        <h2>üñºÔ∏è C·∫Øt & Gh√©p ·∫¢nh N√¢ng Cao</h2>
        <p style="text-align: center; margin-bottom: 30px; color: #666;">
            C√¥ng c·ª• gi√∫p b·∫°n d·ªÖ d√†ng c·∫Øt v√† gh√©p nhi·ªÅu ·∫£nh th√†nh m·ªôt b·ªë c·ª•c ƒë·ªôc ƒë√°o.
        </p>

        <h3>1. T·∫£i ·∫£nh g·ªëc ƒë·ªÉ c·∫Øt h√†ng lo·∫°t</h3>
        <p><em>T·∫£i l√™n c√°c ·∫£nh b·∫°n mu·ªën c·∫Øt th√†nh c√°c ph·∫ßn nh·ªè ƒë·ªÉ gh√©p.</em></p>
        <input type="file" id="inputImages" accept="image/*" multiple><br>

        <p><em>üñ± K√©o chu·ªôt ho·∫∑c ch·∫°m ƒë·ªÉ ch·ªçn v√πng c·∫Øt tr√™n ·∫£nh preview ƒë·∫ßu ti√™n c·ªßa b·∫°n.</em></p>
        <canvas id="previewCanvas"></canvas>
        <div class="crop-controls">
            <h4>V√πng c·∫Øt ·∫£nh h√†ng lo·∫°t (t√≠nh b·∫±ng pixel ·∫£nh g·ªëc):</h4>
            <label>V·ªã tr√≠ X: <input type="number" id="batchCropX" value="0"></label>
            <label>V·ªã tr√≠ Y: <input type="number" id="batchCropY" value="0"></label>
            <label>Chi·ªÅu r·ªông: <input type="number" id="batchCropW" value="100"></label>
            <label>Chi·ªÅu cao: <input type="number" id="batchCropH" value="100"></label>
        </div>
        <br>

        <h3>2. T·∫£i ·∫£nh profile (ƒë·ªÉ c·∫Øt v√† l·∫•y k√≠ch th∆∞·ªõc chu·∫©n)</h3>
        <p><em>·∫¢nh n√†y s·∫Ω x√°c ƒë·ªãnh k√≠ch th∆∞·ªõc cho c√°c √¥ ·∫£nh nh·ªè v√† v·ªã tr√≠ c·ªßa n√≥ trong ·∫£nh gh√©p.</em></p>
        <input type="file" id="inputProfileImage" accept="image/*"><br>
        <p><em>üñ± K√©o chu·ªôt ho·∫∑c ch·∫°m ƒë·ªÉ ch·ªçn v√πng c·∫Øt cho ·∫£nh profile.</em></p>
        <canvas id="profileCanvas"></canvas>
        <div class="crop-controls">
            <h4>V√πng c·∫Øt ·∫£nh profile (t√≠nh b·∫±ng pixel ·∫£nh g·ªëc):</h4>
            <label>V·ªã tr√≠ X: <input type="number" id="profileCropX" value="0"></label>
            <label>V·ªã tr√≠ Y: <input type="number" id="profileCropY" value="0"></label>
            <label>Chi·ªÅu r·ªông: <input type="number" id="profileCropW" value="100"></label>
            <label>Chi·ªÅu cao: <input type="number" id="profileCropH" value="100"></label>
        </div>
        <br>

        <button onclick="processAndShowCroppedImages()" class="primary-btn">‚úÇÔ∏è C·∫Øt ·∫¢nh</button>
        
        <div id="result">
            <h3>·∫¢nh ƒë√£ c·∫Øt h√†ng lo·∫°t (k√≠ch th∆∞·ªõc chu·∫©n):</h3>
            <p style="font-size:0.9em; color:#666;">
                <em>Ki·ªÉm tra c√°c ·∫£nh ƒë√£ c·∫Øt ·ªü ƒë√¢y. B·∫°n c√≥ th·ªÉ b·∫•m "X" ƒë·ªÉ x√≥a n·∫øu kh√¥ng mu·ªën d√πng ·∫£nh ƒë√≥ trong ·∫£nh gh√©p cu·ªëi c√πng.</em>
            </p>
            <div id="croppedImagesContainer"></div>
            <a id="downloadAll" class="button-link" style="display:none">üì¶ T·∫£i t·∫•t c·∫£ ·∫£nh ƒë√£ c·∫Øt (ZIP)</a>
        </div>

        <h3>3. T√πy ch·ªçn gh√©p ·∫£nh</h3>
        <div class="combine-options">
            <h4>C·∫•u h√¨nh b·ªë c·ª•c cho ·∫£nh gh√©p cu·ªëi c√πng:</h4>
            <label>S·ªë l∆∞·ª£ng ·∫£nh Batch m·ªói h√†ng (Ngang): <input type="number" id="combineCols" value="10" min="2"></label>
            <label>T·ªïng s·ªë h√†ng c·ªßa ·∫£nh gh√©p: <input type="number" id="combineRows" value="3" min="1"></label>

            <p>
                <em>L∆∞u √Ω v·ªÅ b·ªë c·ª•c:</em><br>
                - H√†ng 1: Gh√©p `combineCols` ·∫£nh Batch.<br>
                - H√†ng 2: ·∫¢nh Profile (r·ªông 2 c·ªôt, cao 2 h√†ng Batch) + "ghepnho" (2 h√†ng, m·ªói h√†ng `combineCols - 2` ·∫£nh Batch).<br>
                - C√°c h√†ng c√≤n l·∫°i (t·ª´ h√†ng 3 tr·ªü ƒëi): Gh√©p `combineCols` ·∫£nh Batch cho ƒë·∫øn h·∫øt.
            </p>
            <p style="font-size:0.9em; color:#666;">
                *S·ªë c·ªôt ph·∫£i √≠t nh·∫•t l√† 2 ƒë·ªÉ ·∫£nh profile c√≥ ch·ªó. S·ªë h√†ng n√™n √≠t nh·∫•t l√† 2 ƒë·ªÉ ch·ª©a c·∫£ h√†ng 1 v√† h√†ng profile.
            </p>
        </div>
        <button onclick="combineImages()" class="primary-btn">‚ú® Gh√©p ·∫¢nh</button>

        <h3>4. K·∫øt qu·∫£ gh√©p ·∫£nh</h3>
        <canvas id="finalOutputCanvas"></canvas>
        <a id="downloadCombinedImage" class="button-link" style="display:none">üíæ T·∫£i ·∫£nh gh√©p</a>
    </div>
    <script src="js.js"></script>
  
</body>
</html>